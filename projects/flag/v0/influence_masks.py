#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
Created on Wed Nov  8 22:55:52 2017

@author: victor
"""

import numpy

fs_inf_mask = {
        ( 1, 0): numpy.array(
                [[ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0, 10,  9,  7,  5,  3,  2,  1],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0]], dtype = int
                ),
        ( 0, 1): numpy.array(
                [[ 0,  0,  0,  0,  0,  0,  1,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  2,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  3,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  5,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  7,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  9,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0, 10,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0]], dtype = int
                ),
        (-1, 0): numpy.array(
                [[ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 1,  2,  3,  5,  7,  9, 10,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0]], dtype = int
                ),
        ( 0, -1): numpy.array(
                [[ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0, 10,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  9,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  7,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  5,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  3,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  2,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  1,  0,  0,  0,  0,  0,  0]], dtype = int
                ),
        ( 1, 1): numpy.array(
                [[ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  1],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  2,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  3,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  5,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  7,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  9,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0, 10,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0]], dtype = int
                ),
        ( 1, -1): numpy.array(
                [[ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0, 10,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  9,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  7,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  5,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  3,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  2,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  1]], dtype = int
                ),
        (-1, 1): numpy.array(
                [[ 1,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  2,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  3,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  5,  0,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  7,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  9,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0, 10,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0]], dtype = int
                ),
        (-1, -1): numpy.array(
                [[ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0, 10,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  9,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  7,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  5,  0,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  3,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 0,  2,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0],
                 [ 1,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0]], dtype = int
                )
        }

player_inf_mask = numpy.array(
                [[ 0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  2,  2,  2,  0,  0],
                 [ 0,  0,  2,  9,  2,  0,  0],
                 [ 0,  0,  2,  2,  2,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0],
                 [ 0,  0,  0,  0,  0,  0,  0]], dtype = int
                )

def sum_inf_mask(master, mask, center):        
    padding = numpy.int(max(mask.shape)/2)
    padded_master = numpy.pad(master, padding, "constant")    
    mask_radius = numpy.array((numpy.array(mask.shape) - 1)/2, dtype = int)
    py = master.shape[0]-center[1]-1
    padded_master[(py-mask_radius[0]+padding):(py+mask_radius[0]+1+padding),
                  (center[0]-mask_radius[1]+padding):(center[0]+mask_radius[1]+1+padding)] += mask
    return padded_master[padding:master.shape[0]+padding, padding:master.shape[1]+padding]

def prod_and_sum(infmap, mask, center):
    padding = numpy.int(max(mask.shape)/2)
    padded_master = numpy.pad(infmap, padding, "constant")    
    mask_radius = numpy.array((numpy.array(mask.shape) - 1)/2, dtype = int)
    py = infmap.shape[0]-center[1]-1
    prod = padded_master[(py-mask_radius[0]+padding):(py+mask_radius[0]+1+padding),(center[0]-mask_radius[1]+padding):(center[0]+mask_radius[1]+1+padding)] * mask
    return numpy.sum(prod)
    
    
infmap = numpy.zeros((30, 30))
mask = fs_inf_mask[(1,1)]
infmap = sum_inf_mask(infmap, mask, (5,5))

mask = fs_inf_mask[(1,1)]

prod_and_sum(infmap, mask, (1, 1))
    
    
    
    
def get_inf_value(infmap, position):
    py = infmap.shape[0]-position[1]-1
    return infmap[py, position[0]]